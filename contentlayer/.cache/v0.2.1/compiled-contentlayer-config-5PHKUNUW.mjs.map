{
  "version": 3,
  "sources": ["../../../contentlayer.config.ts", "../../../lib/remark-extract-frontmatter.ts", "../../../lib/remark-code-title.ts", "../../../lib/remark-toc-headings.ts", "../../../lib/remark-img-to-jsx.ts"],
  "sourcesContent": ["import { defineDocumentType, ComputedFields, makeSource } from 'contentlayer/source-files'\nimport readingTime from 'reading-time'\nimport path from 'path'\n// Remark packages\nimport remarkGfm from 'remark-gfm'\nimport remarkFootnotes from 'remark-footnotes'\nimport remarkMath from 'remark-math'\nimport remarkExtractFrontmatter from './lib/remark-extract-frontmatter'\nimport remarkCodeTitles from './lib/remark-code-title'\nimport { extractTocHeadings } from './lib/remark-toc-headings'\nimport remarkImgToJsx from './lib/remark-img-to-jsx'\n// Rehype packages\nimport rehypeSlug from 'rehype-slug'\nimport rehypeAutolinkHeadings from 'rehype-autolink-headings'\nimport rehypeKatex from 'rehype-katex'\nimport rehypeCitation from 'rehype-citation'\nimport rehypePrismPlus from 'rehype-prism-plus'\nimport rehypePresetMinify from 'rehype-preset-minify'\n\nconst root = process.cwd()\n\nconst computedFields: ComputedFields = {\n  readingTime: { type: 'json', resolve: (doc) => readingTime(doc.body.raw) },\n  slug: {\n    type: 'string',\n    resolve: (doc) => doc._raw.flattenedPath.replace(/^.+?(\\/)/, ''),\n  },\n  toc: { type: 'string', resolve: (doc) => extractTocHeadings(doc.body.raw) },\n}\n\nexport const Blog = defineDocumentType(() => ({\n  name: 'Blog',\n  filePathPattern: 'blog/**/*.mdx',\n  contentType: 'mdx',\n  fields: {\n    title: { type: 'string', required: true },\n    date: { type: 'date', required: true },\n    tags: { type: 'list', of: { type: 'string' } },\n    lastmod: { type: 'date' },\n    draft: { type: 'boolean' },\n    summary: { type: 'string' },\n    images: { type: 'list', of: { type: 'string' } },\n    authors: { type: 'list', of: { type: 'string' } },\n    layout: { type: 'string' },\n    bibliography: { type: 'string' },\n    canonicalUrl: { type: 'string' },\n  },\n  computedFields,\n}))\n\nexport const Authors = defineDocumentType(() => ({\n  name: 'Authors',\n  filePathPattern: 'authors/**/*.mdx',\n  contentType: 'mdx',\n  fields: {\n    name: { type: 'string', required: true },\n    avatar: { type: 'string' },\n    occupation: { type: 'string' },\n    company: { type: 'string' },\n    email: { type: 'string' },\n    twitter: { type: 'string' },\n    linkedin: { type: 'string' },\n    github: { type: 'string' },\n    layout: { type: 'string' },\n  },\n  computedFields,\n}))\n\nexport default makeSource({\n  contentDirPath: 'data',\n  contentDirInclude: ['blog', 'authors'],\n  documentTypes: [Blog, Authors],\n  mdx: {\n    cwd: process.cwd(),\n    remarkPlugins: [\n      remarkExtractFrontmatter,\n      remarkGfm,\n      remarkCodeTitles,\n      [remarkFootnotes, { inlineNotes: true }],\n      remarkMath,\n      remarkImgToJsx,\n    ],\n    rehypePlugins: [\n      rehypeSlug,\n      rehypeAutolinkHeadings,\n      rehypeKatex,\n      [rehypeCitation, { path: path.join(root, 'data') }],\n      [rehypePrismPlus, { ignoreMissing: true }],\n      rehypePresetMinify,\n    ],\n  },\n})\n", "import { Parent } from 'unist'\nimport { VFile } from 'vfile'\nimport { visit } from 'unist-util-visit'\nimport yaml from 'js-yaml'\n\nexport default function extractFrontmatter() {\n  return (tree: Parent, file: VFile) => {\n    visit(tree, 'yaml', (node: Parent) => {\n      //@ts-ignore\n      file.data.frontmatter = yaml.load(node.value)\n    })\n  }\n}\n", "import { Parent } from 'unist'\nimport { visit } from 'unist-util-visit'\n\nexport default function remarkCodeTitles() {\n  return (tree: Parent & { lang?: string }) =>\n    visit(tree, 'code', (node: Parent & { lang?: string }, index, parent: Parent) => {\n      const nodeLang = node.lang || ''\n      let language = ''\n      let title = ''\n\n      if (nodeLang.includes(':')) {\n        language = nodeLang.slice(0, nodeLang.search(':'))\n        title = nodeLang.slice(nodeLang.search(':') + 1, nodeLang.length)\n      }\n\n      if (!title) {\n        return\n      }\n\n      const className = 'remark-code-title'\n\n      const titleNode = {\n        type: 'mdxJsxFlowElement',\n        name: 'div',\n        attributes: [{ type: 'mdxJsxAttribute', name: 'className', value: className }],\n        children: [{ type: 'text', value: title }],\n        data: { _xdmExplicitJsx: true },\n      }\n\n      parent.children.splice(index, 0, titleNode)\n      node.lang = language\n    })\n}\n", "import { VFile } from 'vfile'\nimport { Parent } from 'unist'\nimport { visit } from 'unist-util-visit'\nimport { Heading } from 'mdast'\nimport slugger from 'github-slugger'\nimport { toString } from 'mdast-util-to-string'\nimport { remark } from 'remark'\nimport { Toc } from 'types/Toc'\n\nexport function remarkTocHeadings() {\n  return (tree: Parent, file: VFile) => {\n    const toc: Toc = []\n    visit(tree, 'heading', (node: Heading) => {\n      const textContent = toString(node)\n      toc.push({\n        value: textContent,\n        url: '#' + slugger.slug(textContent),\n        depth: node.depth,\n      })\n    })\n    file.data.toc = toc\n  }\n}\n\n/**\n *\n * @param {string} markdown\n * @return {Toc} toc\n */\nexport async function extractTocHeadings(markdown) {\n  const vfile = await remark().use(remarkTocHeadings).process(markdown)\n  return vfile.data.toc\n}\n", "import { Parent, Node, Literal } from 'unist'\nimport { visit } from 'unist-util-visit'\nimport sizeOf from 'image-size'\nimport fs from 'fs'\n\ntype ImageNode = Parent & {\n  url: string\n  alt: string\n  name: string\n  attributes: (Literal & { name: string })[]\n}\n\nexport default function remarkImgToJsx() {\n  return (tree: Node) => {\n    visit(\n      tree,\n      // only visit p tags that contain an img element\n      (node: Parent): node is Parent =>\n        node.type === 'paragraph' && node.children.some((n) => n.type === 'image'),\n      (node: Parent) => {\n        const imageNode = node.children.find((n) => n.type === 'image') as ImageNode\n\n        // only local files\n        if (fs.existsSync(`${process.cwd()}/public${imageNode.url}`)) {\n          const dimensions = sizeOf(`${process.cwd()}/public${imageNode.url}`)\n\n          // Convert original node to next/image\n          ;(imageNode.type = 'mdxJsxFlowElement'),\n            (imageNode.name = 'Image'),\n            (imageNode.attributes = [\n              { type: 'mdxJsxAttribute', name: 'alt', value: imageNode.alt },\n              { type: 'mdxJsxAttribute', name: 'src', value: imageNode.url },\n              { type: 'mdxJsxAttribute', name: 'width', value: dimensions.width },\n              { type: 'mdxJsxAttribute', name: 'height', value: dimensions.height },\n            ])\n\n          // Change node type from p to div to avoid nesting error\n          node.type = 'div'\n          node.children = [imageNode]\n        }\n      }\n    )\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
